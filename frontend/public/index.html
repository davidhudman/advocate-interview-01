<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Express TypeScript API - Test Results</title>
    <link rel="stylesheet" href="../src/styles.css" />
  </head>
  <body>
    <header>
      <h1>Express TypeScript API</h1>
      <div class="actions">
        <div class="theme-switch">
          <label class="switch">
            <input type="checkbox" id="themeToggle" />
            <span class="slider round"></span>
          </label>
          <span class="theme-label">Dark Mode</span>
        </div>

        <!-- Add the test details toggle switch -->
        <div class="test-details-switch">
          <label class="switch">
            <input type="checkbox" id="testDetailsToggle" />
            <span class="slider round"></span>
          </label>
          <span class="theme-label">Show Test Details</span>
        </div>

        <button id="runTests">Run Tests</button>
        <button id="checkHealth">Check Health</button>

        <button id="viewAllDb">All DB JSON</button>
        <button id="viewProdDb">Prod DB JSON</button>
        <button id="viewTestDb">Test DB JSON</button>
        <div class="db-actions"></div>
      </div>
    </header>

    <main>
      <!-- Add a new section after the test section -->
      <section id="databaseSection">
        <h2>Database Viewer</h2>
        <div class="db-controls">
          <button id="showProdDb">Prod DB Table</button>
          <button id="showTestDb">Test DB Table</button>
          <button id="hideDbView">Hide DB View</button>
        </div>
        <div id="dbViewerContent" class="result-panel">
          <p>Click one of the database buttons to view table data</p>
        </div>
      </section>

      <section id="testSection">
        <h2>Test Results</h2>

        <!-- New: Test summary and filter controls -->
        <div id="testControls" class="test-controls">
          <div id="testSummary" class="test-summary"></div>
          <div class="test-filters">
            <input type="text" id="testSearch" placeholder="Filter tests..." />
            <select id="testStatusFilter">
              <option value="all">All Tests</option>
              <option value="passed">Passed Only</option>
              <option value="failed">Failed Only</option>
            </select>
          </div>
        </div>

        <div id="testResults" class="result-panel">
          <p>Click "Run Tests" to execute the test suite</p>
        </div>
      </section>

      <section id="healthSection">
        <h2>Health Status</h2>
        <div id="healthResult" class="result-panel">
          <p>Click "Check Health" to see the API health status</p>
        </div>
      </section>
    </main>

    <script src="../src/app.js"></script>
  </body>

  <!-- Add CSS for the hidden class -->
  <style>
    .hidden {
      display: none;
    }

    .details-toggle {
      margin: 5px 0;
      padding: 3px 8px;
      background-color: var(--button-bg);
      color: var(--button-text);
      border: 1px solid var(--border-color);
      border-radius: 4px;
      cursor: pointer;
    }

    .test-details-switch {
      display: flex;
      align-items: center;
      margin-right: 15px;
    }
  </style>
</html>
